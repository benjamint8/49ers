October 13, 2023
I met with Professor Coimbra and Lysha today to discuss initial work that needs to be performed in order to start receiving data from the datalogger. In terms of credentials needed for the laptops used to connect to the datalogger, the relevant information can be found in the “Transition Notes” document found in the North Campus SWH directory. The following reflects the notes I took when I asked Lysha about troubleshooting steps she would recommend for the datalogger: 


* Take a multimeter up to 7th and check that there’s a voltage difference (some signal is coming through) coming out of the wires from the RSR2 that are going into the datalogger (and double check that the datalogger has voltage, but should probably be fine; instrument probably needs to be brought back to the lab and debugged there), so check wires, check voltage, and if none found then take back to the lab
* The RSR has 2 or 3 pairs of wires that go into the datalogger so the way it inputs is that it has the wires going into the terminal block so it’s possible the wires aren’t shoved in enough (bring wire strippers and a screwdriver, could be a wire contact issue) so check each one of the datalogger ports to make sure it’s inserted correctly), and there’s also the power plug that goes into the weather box so disconnect it and make sure it’s still producing the 12V required for its operation; when datalogger was first put back on the roof and everything was plugged in the RSR instrument moved once and then it stopped so Lysha tried the good ol unplugging and replugging routine and things didn’t work out (so nothing should be wrong with the gears; this is assuming there’s an issue with the instrument of course; there could be an issue with the software and the CR file that we sent it, actually probably is a software issue now that she thinks about it)
* More context: when switched to the dell xps and switched to the new Campbell software so could update in the OS in the datalogger (from OS 13 to 32!!), and that OS update fixed the networking issue but there was some encrypted software on the CR1000 from the RSR manufacturers so the OS update meant that we could no longer access the encrypted RSR files the original OS was calling; we may have made some differences to the scripts on our side though but it could’ve been just differences in how the RSR interprets commands; Lysha took our code and took where the encrypted information was and put it in ours so there could be something where she didn’t correct where the wires are and may be using some default inputs (we have to tell the instrument which inputs from the datalogger to look at and it may be using the wrong values so have to find it in the code; our wiring matches what there was before but there was some more software added but they’re all text files so i should be able to run a bunch of them and find the differences; where the numbers are different); scientist at RSR manufacturer suggested a couple lines of code to check that are right for our installation, which Lysha believes she checked but would be good to control F the old and new text files to check for discrepancies; Lysha mailed me the new unencrypted code, and we have some code on our side (some old code that is RSR2 code that we added sections to in order to create data tables and translate outputs from older instruments); there should be all the CR codes in the Dell XPS computer which she named “nch_test” (old files were Main and Constants, Main called Constants and imported Constants content, and now instead she put the constants file into the Main file so now everything is in one file)


In summary, my next steps will include going to check on the electrical connections on the Seventh College roof solar installation and checking for potential discrepancies between the old and new CR1 code.


10/18/2023


I left the key for access to the roof of the North Campus Residential Hall in SERF 117 with Jason Kniss. Please stop by to get it when you have a chance, and be extremely careful with both the key and the gate when you go there. Please let me know if you need anything. My cell number is 858-692-7981 in case there is a need. If I don’t pick up right away, send me a text.


You should receive some form to approve for your hiring from UC San Diego any day now. The paperwork is all done from my side, and I am hoping that you can be officially hired on 11/1, the latest.


Thanks,
CC
October 18-20, 2023
I received the paperwork today for the CER position with a start date of November 1st. I’m currently in the process of officially terminating my employment with LLNL, as I was put on indeterminate employment status so I could potentially return to the Lab during winter break to continue working on an experiment I had set up. Once I have officially terminated my employment with LLNL, I’ll finish signing all the paperwork I received. I’ll make sure to pick up the key from Jason’s office tomorrow morning.


October 20 Update: I picked up the key and the Dell XPS laptop from Jason, so as far as troubleshooting the solar instrument installation at Seventh is concerned, everything is ready to go. Below is a list of tools I’ll need to solve the current problems with the installation:
* Problem: The instruments are not sitting on a surface parallel to the ground.
   * Tools Required: Adjustable wrench.
* Problem: The RSR2 is not operating as expected.
   * Tools Required: Multimeter, Dell XPS laptop, RS232 cable, screwdriver (I always carry one in my backpack that will be adequate), wire strippers. Note that the problem may be a software issue, so troubleshooting should first be performed with Dell XPS laptop. Also want to know if the RSR2 is getting power (refer to manual: https://s.campbellsci.com/documents/au/manuals/rsr2.pdf).


10/23/2023


Please check with Jason to see if the toolbox with tools and multimeters that Lysha was using is not in SERF 117. If it’s not, please let me know and I will bring it to SERF tomorrow. If it is, please feel free to move it to 119 since you are only one using it at this point.
October 27, 2023
I spent some time this morning comparing the old RSR2_NCH codes to the new code that we adapted from the code the Irradiance, Inc. company manager (Chris Kern) sent to Lysha, looking for discrepancies that may lead to the RSR2 not behaving as expected. The CR1000 manual also has some troubleshooting guidelines which I’ll be able to reference. At the installation, I’ll also be able to cross reference between the RSR2 user manual (which has a suggested wiring diagram), the physical installation, and the code. Until I get to that, I will continue comparing the old and new codes side by side (especially the datalogger port inputs used in the old versus the new code, which Lysha recommended checking), and see if I find anything of note in particular. I’ll make additions to this entry if I find anything worth following up on. (Perhaps one approach I could try would be to create a few alternative codes that make changes to very limited blocks of code whereI observe discrepancies and try uploading those to the datalogger to see if anything changes.)


A couple of housekeeping items to finish up. First, my apologies for not checking the toolbox drop-off sooner, I was preoccupied with midterms this week, but I should have more availability over the next few weeks as I only have one quiz over the Week 5-7 period. Second, I’ll be going to the Livescan office today to start on my background check. I’ve filled out all the administrative forms I’ve been sent, so I hopefully shouldn’t have too much else to do before my official start date.
November 3, 2023
Since I last updated this document, I’ve met with an HR representative twice to verify my eligibility to work, and just today we completed my I-9 verification, so I should be good to go on the verification process and should be receiving additional information soon. I’ve also been learning how to use Linux commands to access data from my “btarver@coimbra-server1” account via Apple’s Terminal application. My hope is that by the end of today I’ll have figured out how to easily request new data from the datalogger via Terminal commands and then view that data. I have started a “Miscellaneous Work-Related Notes” document in which I will note down the procedures I need to follow in order to view this data easily. I will also verify either today or next week that I can successfully upload new .CR1 scripts to the datalogger, since I found at least one item of concern in the code currently running on the datalogger that could theoretically have some impact on the RSR2’s operation. Once I have verified this, I will upload a couple of test programs to the datalogger and see if a simple software fix will work to get the RSR2 back up and running. If not, I will bring the necessary hardware tools up to the installation and manually troubleshoot the system. Note to self: I will need to fetch an Ethernet to USB-C adapter cable from Jason’s office once he’s back in-person, perhaps on Wednesday. I will likely be preparing for a Computational Methods quiz on Monday, so I’d have limited time to troubleshoot the physical installation then.
November 6, 2023
Just to give a brief update, I figured out how to request new data from the datalogger via Terminal commands and then view that data with relative ease, although it requires me to copy the data from my computer and then do a little bit of file name and HTML manipulation, but it’s nothing that takes me more than a minute. (I likely could do most of that in a single Terminal command, but that’s something I’ll have to figure out later.) One thing of note from looking at the data tables the datalogger returns from HTTP calls is that there seem to be zero records being stored in the “SweepRaw” tables, which makes sense given that the relevant subroutine is (unless I am mistaken) performed by the RSR2, which currently isn’t working. 


One way to remotely test the new .CR1 script from a data collection perspective will be to upload the new script, wait a few minutes, and then access the “Newest Record from Status” table which will verify that the datalogger is running the code I have uploaded, and then also access one of the “SweepRaw” tables to see if the relevant subroutine is working as expected. Seeing the shadowband rotating will of course be a good indicator of whether the implemented change has worked or not, but the items I described will be additional helpful indicators.
November 8, 2023
I went to the solar installation[a] to see what I could find out about the RSR2’s functionality (or lack thereof, more accurately). It may still be a software issue, but I’ve become less convinced of this hypothesis after testing the datalogger inputs with the multimeters. The multimeter reads zero voltage between both the Hi Licor pyranometer input and ground as well as the Lo Licor input and ground. In terms of the direct connections between the RSR2 motor controller and the datalogger, the 5V connection is reading 5V as expected. I read 0V between ground and the C1 Tx COM1 input from the controller, and ~4.8V between the C2 Tx COM1 input from the controller and ground, but I am not sure if those readings are particularly illuminating. At any rate, there appears to potentially be a sensor/power issue with the RSR2 that’s causing the multimeter to read zero voltage across its sensor and controller inputs, certainly worth further investigation. At any rate, I downloaded the most recently collected data from the station, which included well over a million data points. Also on the bright side, I was able to level the grate on which the instruments sit so it’s now roughly horizontal, +- ~1º depending on where the level tool is placed on the grate (the metal grate holding up the sensors may be sagging slightly in the middle). Further fine tuning on that front is most likely warranted though.
November 17, 2023
A few brief updates for this week. I’ve completed all the necessary standard trainings for UCSD employees, so it looks like I won’t have to worry about that again until November 2024 when one of the trainings expires. I’ve also completed a preliminary script to process the HTML data from the datalogger and convert it to a CSV file output, which can then be manipulated and graphed using Python’s plotly library, or perhaps more straightforwardly through Excel. I still have to finalize the script to call and post data to the final server locations in which the data will be stored, but it’s otherwise finished. I also figured out how to use the wget command in Linux to retrieve specific data tables with specific numbers of records from the datalogger remotely. The next thing I’ll be working on will be to access the data I downloaded from the installation to the Dell XPS laptop (update: it’s stored in “C:/Campbellsci/LoggerNet”, and can be converted directly from .dat to .csv format for viewing in Excel), after which point I’ll try to graph some of that data and see what happens. I’ll also be looking more into how I can set up a datastream from the datalogger to be pinging it automatically every x amount of minutes.
November 20, 2023
I was looking again at the data from the datalogger and it turns out that some RSR data is being recorded, specifically the “RSR_Zen_Avg”, although I am not sure why exactly this information is being recorded and, for example, the ““RSR_Az_Avg” isn’t. At any rate, I have tried graphing some of the data I collected from the datalogger on 11/8 (the data and graphs can be found here[b]). It may be worth noting that there is a significant gap in the data collected, specifically between late June and early September, as data was only collected for a couple of days in early July during that period. It also seems that the battery voltage increased from ~12.4V to 15V sometime during that period. There are also minor discrepancies in the GHI data collected by the PSP and the SPN (during the day, their readings differ by as much as ~100-200W/m^2, a pattern which still holds in data I collected remotely today). There’s not much else to note superficially about the data, besides the fact that the data collected between late April and late June isn’t useful (most parameters have readings of “0” or “NAN” for that period). 


On the scripting front, I figured out how to set up a Cron job to fetch data automatically from the datalogger and have verified that I can run Cron jobs from the admin account on the server. I have also imported the request, process, and plot scripts and adapted them to be run from the “ladmin” user on the server. I have also finished debugging the Cron job and have completed this quarter’s key deliverable of demonstrating that I can generate graphs in a semiautomatic way. Automatically generated data can be viewed in the ladmin account from the “/home/ladmin/data/csv/NCH_data.csv” filepath. Automatically generated graphs can be viewed from the “/home/ladmin/data/html_plots” filepath.


I will be working on figuring out how to get the data posted to the nch-datalogger GitHub repository and how to generate a new CSV file for the plot.py script to pull data from each week, both so that the plot functions don’t have to process unreasonably large data volumes in the future and so that CSVs can be more neatly organized. I may also need to update the types of graphs that the script generates to better fit our needs.
December 1, 2023
I am currently in the process of updating the server scripts to post data to a MySQL server instead of saving data to a CSV. I’ve verified that I am able to post data on an automatic basis to a MySQL database of my making. I am currently experiencing a bottleneck with connecting the MySQL server to Grafana, a website I could use to embed graphs on the Group’s Google Sites page, but I am hoping that the DERConnect researchers Lysha connected me with will be able to assist in overcoming this problem. (Dec. 4th update: I have now cleared this bottleneck.) I’m hoping that once I’ve fully fleshed out the connections between the different software tools we need to get the data dashboard up and running, I’ll be able to write a short tutorial guide which could help users get fully familiarized with how to access and understand every connection point in that data retrieval, processing, and visualization pipeline.
December 8, 2023
As a quick update, I now have the pipeline between the datalogger, the 117 servers, the MySQL server, and the Grafana server up and running, such that data is being collected each minute and uploaded to an online dashboard. That dashboard can be viewed at the following link: http://coimbra-server1:3000/public-dashboards/abe13f4d89244ed8922cfc3089c4870d. Note that this link is currently only available behind the UCSD firewall, and that the Office of Engineering Computing is currently reviewing my request to make the dashboard fully available to the public (January update: the link should now be available outside of UCSD’s firewall). Also note that the link may be unavailable on certain browsers, such as older versions of Safari (the most up-to-date version of Safari, as well as Chrome and Firefox, should be able to view the dashboard). Finally note that using “https” instead of “http” to access the link will cause the connection to fail because it is not possible to establish a fully secure connection to the Grafana server dashboard. I have also created the tutorial guide I discussed in last week’s log entry, which can be viewed here.






(Lower) quality, but recent paper on the dome temperature issues related to PSPs:


https://opg.optica.org/directpdfaccess/d5830051-30c1-4d9f-8ac7b42bf167e4dc_371155/copp-1-4-263.pdf?da=1&id=371155&seq=0&mobile=no


January 19, 2023
I have begun a literature review for potentially relevant sources for developing a heat transfer model for the dome of a pyrgeometer. I found one source of particular interest (https://journals.ametsoc.org/configurable/content/journals$002fatot$002f16$002f1$002f1520-0426_1999_016_0174_eonvas_2_0_co_2.xml?t:ac=journals%24002fatot%24002f16%24002f1%24002f1520-0426_1999_016_0174_eonvas_2_0_co_2.xml) whose aims seem to be very similar to ours that I would recommend reading. I have also listed the other sources I have reviewed thus far relevant to the dome heating effect here: https://docs.google.com/spreadsheets/d/115b62nQbuwGsCCoKuW6RHexjFe5qR45w3c4yODAPCNY/edit?usp=share_link. 


I should note that I have not updated the calibration constants in the script currently running on the datalogger, so I will need to bring an RS232 cable up to the roof and do that during the ClimaVUE50 installation or before then. (1/24/24 update: I have now updated the calibration constants on the .CR1 file currently running on the datalogger). Regardless of that, though, the data from the PSP and the SPN about the GHI now seem to be in much better agreement than before (1/24/24 update: this seems to have been a premature assessment, they are still in substantial disagreement; I should note that the SPN data looks fairly choppy, especially when the GHI decays to zero in the late afternoon).
February 8, 2023
I have updated the graphs on the dashboard to give a more aesthetically pleasing view of the current meteorological data we are receiving from the roof, including the filled curves for GHI. I have also begun writing a Python script which will translate the previous work I had done creating a spreadsheet of equations to solve for the monthly average daily utilizable energy. Once I have finished adapting the script for calculating daily utilizable energy, I can then deploy the script on the server and we can start visualizing daily emissions and costs associated with not using solar water heating. Of course, if John Dilliot or Michelle Perez can indeed assist with supplying hourly hot water data (or estimates thereof), I can proceed with estimating hourly utilizable energy.
February 14, 2023
I have removed the WXT520 from the roof and installed the ClimaVue50. I also deployed a new script to collect data from the ClimaVue50. So far there are a couple areas of concern that I will need to address as soon as possible. The first area of concern is the relative humidity measurements - they have been stuck at constant values for hours at a time, which I sincerely hope is due to an error with the code I deployed, but I’ll make sure to check when I get the chance. (2/15/2023 update: it doesn’t seem to be a code error unfortunately, the same issue also effects the barometric pressure readings; interestingly enough though, it seems to take a new measurement every time it’s power cycled). Also, there has been at least one instance so far where some of the ClimaVue sensors returned a junk reading (i.e. -6XX C and W/m^2 for the temperature sensor and the GHI sensor), and I am not sure why this might have occurred (2/15/2023 update: this seems to have been due to a loose wire connection that was temporarily remedied–I double checked the connections before I left so I’m not sure what’s going wrong). It will likely be worthwhile to reach out to the Campbell Scientific technical support staff or the engineer CC’ed on our correspondences with Aspen Nielsen to ask about potential troubleshooting steps to fix the RH and pressure readings. It also seems like the 9V battery of the multimeter I was using needs to be replaced. Here’s a photo of the battery:
  

February 23, 2023
It appears that the programming fix the Campbell Scientific support staff proposed has worked for both getting live values for the relative humidity as well as eliminating highly erroneous values for temperature and GHI. By next Thursday’s meeting I hope to have new dashboard panels up and running which plot estimations of natural gas used and costs incurred via use of natural gas instead of solar water heating (March 4 update: these panels are now up and running, and the rest of the dashboard has been enhanced for visual clarity). I also hope to use some of the data Michelle Perez shared to create estimates for the gas used and costs incurred from water heating. On the particle dynamics research front, I have reached out to Wolfram’s technical support to see if they can help with fixing my Kim et al. validation code. 
[a](Note to self: RS232 to USB C cable is still at the installation at Seventh.)
[b]Excel limits me to read only mode so I had to use Google Sheets, even though their graphing tools are admittedly worse.